<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="HTML5学习总结, 秋山的技术博客">
    <meta name="description" content="行之于途而应于心">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>HTML5学习总结 | 秋山的博客</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="秋山的博客" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">秋山的博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">秋山的博客</div>
        <div class="logo-desc">
            
            行之于途而应于心
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/SilenceZeng" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/SilenceZeng" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/4.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">HTML5学习总结</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/HTML5/">
                                <span class="chip bg-color">HTML5</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%89%8D%E7%AB%AF/" class="post-category">
                                前端
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2016-06-21
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    11.9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    47 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="html5-与-html4-区别"><a href="#html5-与-html4-区别" class="headerlink" title="html5 与 html4 区别"></a>html5 与 html4 区别</h2><h3 id="语法的改变"><a href="#语法的改变" class="headerlink" title="语法的改变"></a>语法的改变</h3><p>DOCTYPE 声明：&amp;lt!DOCTYPE html&amp;gt</p>
<p>指定字符编码：&amp;ltmeta charset=”UTF-8”&amp;gt,HTML5 开始推荐 UTF-8</p>
<p>所谓的字符是对各种文字和符号的总称，涵盖了各国文字、标点符号、图形符号和数字等。字符集是对多个字符的集合，常用的字符集有 ASCII、GB2312、Unicode、ISO 等。科学家为了让计算机准确处理各种字符集，需要对字符进行编码，以便计算机能够识别和存储各种文字。</p>
<p>在 HTML5 出现之前，浏览器会根据三种方式确认页面的编码方式，按优先级排列如下： 1)获取 HTTP 请求头中的 Content-Type 字符对于的值。 2)使用 meta 标签声明，语法格式如下：</p>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"> 3)外链资源使用 charset 属性声明编码格式，如在 script 标签中使用语法格式如下：

<pre><code>&lt;script type=&quot;text/javascript&quot; src=&quot;myscript.js&quot; charset=&quot;UTF-8&quot;&gt;&lt;/script&gt;
</code></pre>
<p>HTML5 出现后，对字符集的使用做了大量的简化，可以使用以下语法进行字符声明：</p>
<pre><code>&lt;meta charset=&quot;utf-8&quot;&gt;
</code></pre>
<p>对于日常网站开发，结合 HTML5 的字符集使用，建议： 1)最优先使用 HTTP 请求头指定编码。 2)统一全站字符集编码，HTML5 推荐使用 UTF-8 字符集。 3)使用 meta 标签确认字符集编码，尽可能放在 html 标签的第一个子元素位置 4)第三方引用的脚本，在不确认字符编码时，加上 charset 属性设置编码格式</p>
<p>为什么会产生乱码？<br>乱码产生的根本原因是你保存的编码格式和浏览器解析时的解码格式不匹配导致的。<br>乱码一般是英文以外的字符才会出现。</p>
<p>可以省略标记的元素： 1)不允许写结束标记的元素有：area、base、br、col、command、embed、hr、img、input、keygen、link、meta、param、source、track、wbr 2)可以省略结束标记的元素有：li、dt、dd、p、rt、rp、optgroup、option、colgroup、thead、tbody、bfoot、tr、td、th 3)可以省略全部标记的元素有：html、head、body、colgroup、tbody。</p>
<p>具有 boolean 值的属性：对于具有 boolean 之的属性，例如 disabled 与 readonly 等，当只写属性而不指定属性值时，表示属性值为 true，如果想要将属性值设为 false，可以不使用该属性值。</p>
<p>属性值可以省略引号</p>
<h3 id="新增的元素和废除的元素"><a href="#新增的元素和废除的元素" class="headerlink" title="新增的元素和废除的元素"></a>新增的元素和废除的元素</h3><p>新增的元素：section、article、aside、header、hgroup、footer、nav、figure、vedio、audio、embed、mark、progress、time、ruby、rt、rp、wbr、canvas、command、details、datalist、datagrid、keygen、output、source、menu</p>
<p>新增的 input 类型：email、url、number、range、Date Pickers</p>
<p>废除的元素： 1)能用 css 替代的元素：basefont、big、center、font、s、strike、tt、u 2)不再使用 frame 框架，只支持 iframe 框架 3)只有部分浏览器支持的元素：applet、bgsound、blink、marquee 4)其他废除的元素：rb、acronym、dir、isindex、listing、xmp、nextid、plaintext</p>
<h3 id="新增的属性和废除的属性"><a href="#新增的属性和废除的属性" class="headerlink" title="新增的属性和废除的属性"></a>新增的属性和废除的属性</h3><p>新增的属性： 1)表单相关的属性：autofocus、placeholder、form、required、autocomplete、min、max、multiple、pattern、step、formaction、formenctype、formmethod、formnovalidate、formtarget、novalidate 2)链接相关的属性：<br>为 a 与 area 元素增加了 media 属性<br>为 area 元素增加了 hreflang 和 rel 属性，主要目的是保持与 a 元素、link 元素的一致性<br>为 link 元素增加了新属性 sizes。该属性可以与 icon 元素结合使用（通过 rel 属性），该属性指定关联图标（icon 元素）的大小<br>为 base 元素增加了 target 属性，主要目的是保持与 a 元素的一致性<br>a 元素还有 download 属性 3)其他属性<br>为 ol 元素增加了 reversed 属性<br>为 meta 元素增加了 charset 属性<br>为 munu 元素增加了 type 与 label<br>为 style 元素增加了 scoped 属性<br>为 script 元素增加了 async 属性<br>为 html 元素增加了 manifest 属性<br>为 iframe 增加了 sandbox、seamless、srcdoc 属性</p>
<p>废除的属性：很多，略</p>
<h3 id="全局属性"><a href="#全局属性" class="headerlink" title="全局属性"></a>全局属性</h3><p>1)contentEditable<br>2)designMode: on 或 off<br>3)hidden 属性<br>4)spellcheck: 必须声明属性值为 true 或 false<br>5)tabindex</p>
<h2 id="html5-结构"><a href="#html5-结构" class="headerlink" title="html5 结构"></a>html5 结构</h2><h3 id="新增的主体结构元素"><a href="#新增的主体结构元素" class="headerlink" title="新增的主体结构元素"></a>新增的主体结构元素</h3><p>article 元素<br>article 元素代表文档、页面或应用程序中独立的、完整的可以被外部引用的内容。article 元素也可以用来表示插件，它的作用是使插件看起来好像内嵌在页面中一样。<br>section 元素<br>section 元素用于对网站或应用程序中页面上的内容进行分块。在 HTML5 中，article 元素可以看成是一种特殊种类的 section 元素，它比 section 元素更强调独立性。即 section 元素强调分段或分块，而 article 元素强调独立性。<br>section 元素使用禁忌：<br>1）不要将 section 元素用作设置样式的页面容器，那是 div 的工作；<br>2）如果 article 元素、aside 元素或 nav 元素更符合使用条件，不要使用 section 元素；<br>3）不要为没有标题的内容区块使用 section 元素。<br>nav 元素<br>nav 元素是一个可以用作页面导航的链接组<br>aside 元素<br>aside 元素用来表示当前页面或文章的附属信息部分。典型应用是侧边栏<br>time 元素和微格式<br>pubdate 属性</p>
<h3 id="新增的非主体结构元素"><a href="#新增的非主体结构元素" class="headerlink" title="新增的非主体结构元素"></a>新增的非主体结构元素</h3><p>header 元素<br>hgroup 元素<br>footer 元素<br>address 元素</p>
<h2 id="表单与文件"><a href="#表单与文件" class="headerlink" title="表单与文件"></a>表单与文件</h2><h3 id="新增元素和属性"><a href="#新增元素和属性" class="headerlink" title="新增元素和属性"></a>新增元素和属性</h3><p>新增属性<br>1)form 属性<br>当一个 input 元素被用于多个元素时，可以在 form 属性上将各表单 id 值以空格符分隔开来<br>2)formaction 属性<br>3)formmethod 属性<br>4)placeholder 属性<br>5)autofocus 属性<br>6)autocomplete 属性<br>autocomplete 属性规定输入字段是否应该启用自动完成功能。<br>自动完成允许浏览器预测对字段的输入。当用户在字段开始键入时，浏览器基于之前键入过的值，应该显示出在字段中填写的选项。<br>注释：autocomplete 属性适用于 form，以及下面的 input 类型：text,search,url,telephone,email,password,datepickers,range 以及 color。</p>
<p>大幅度增加和改良的 input 种类<br>1)url 类型<br>2)email 类型<br>3)date 类型<br>4)time 类型<br>5)datetime 类型<br>6)datetime-local 类型<br>7)month 类型<br>8)week 类型<br>9)number 类型<br>10)range 类型<br>11)search 类型<br>12)tel 类型<br>13)color 类型</p>
<p>output 元素的追加</p>
<h3 id="表单验证"><a href="#表单验证" class="headerlink" title="表单验证"></a>表单验证</h3><p>自动验证: required pattern min 和 max step<br>显示验证：checkValidity()方法<br>取消验证：<br>1)form 的 novalidate 属性<br>2)input 元素或 submit 元素的 formnovalidate 属性</p>
<h3 id="HTML5-表单验证插件"><a href="#HTML5-表单验证插件" class="headerlink" title="HTML5 表单验证插件"></a>HTML5 表单验证插件</h3><p><a target="_blank" rel="noopener" href="http://www.zhangxinxu.com/wordpress/2012/12/jquery-html5validate-html5-form-validate-plugin/">html5Validate</a><br>自定义错误信息：setCustomValidity()方法</p>
<h3 id="增强的页面元素"><a href="#增强的页面元素" class="headerlink" title="增强的页面元素"></a>增强的页面元素</h3><p>新增的 figure 元素和 figcaption 元素<br>新增的 details 元素和 summary 元素<br>input 和 datalist</p>
<pre><code>&lt;input type=&quot;text&quot; list=&quot;province&quot;&gt;
    &lt;datalist id=&quot;province&quot;&gt;
        &lt;option value=&quot;北京&quot;&gt;&lt;/option&gt;
        &lt;option value=&quot;上海&quot;&gt;&lt;/option&gt;
        &lt;option value=&quot;浙江&quot;&gt;&lt;/option&gt;
    &lt;/datalist&gt;
</code></pre>
<p>新增的 mark 元素：用来在搜索结果中高亮关键词，也常用来文章引用后加的标示，与 em（）、strong 不同<br>新增的 progess 元素：表示任务的进度，如 Windows 系统中软件的安装、文件的复制等场景的进度。<br>新增的 meter 元素：表示某种计量，适用于温度、重量、金额等量化的表现。<br>新增的 menu 和 command 元素: menu 在 html4 被弃用，在 html5 中重定义，command 为 html5 新增，这两个标签目前基本没有浏览器支持<br>改良的 ol 列表：新增了 start 属性和 reversed 属性<br>改良的 dl 列表：html4 为定义列表(definition lists)，html5 为描述列表(description list)<br>加以严格限制的 cite 元素：定义引用。可使用该标签对参考文献的引用进行定义，比如书籍或杂志的标题。不用来表示作者，除非标题是作者<br>重新定义的 small 元素：The small element represents side comments such as small print.而非通用展示性元素，通常用在诸如免责声明、注意事项、法律法规、版权声明等声明文字中，不应该应用在页面主体内容中</p>
<h3 id="文件-API"><a href="#文件-API" class="headerlink" title="文件 API"></a>文件 API</h3><p>FileList 对象和 file 对象：files 返回一个 FileList 对象<br>Blob 对象：Blob 对象有两个属性，size 属性表示一个 Blob 对象的字节长度，type 属性表示 MIME 类型，file 对象也继承了这个对象<br>FilReader 接口：FileReader 接口有 4 个方法，其中 3 个用来读取文件，一个用来中断读取。无论读取成功还是失败，方法不返回读取结果，结果保存在 result 属性中。<br>4 个接口方法：readAsDataURL、readAsBinaryString、readAsText、abort<br>FileReader 接口事件：onabort、onerror、onloadstart、onprogress、onload、onloadend<br>FileSystem<br>在使用 FileSystem 对象的相关应用接口时，首先要获得对沙箱文件系统的访问权限。<br>通过这个接口，可以进行文件的新建、修改、删除。<br>//获取兼容文件请求对象<br>window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;<br>//请求获取浏览器沙箱文件系统<br>//window.webkitStorageInfo.requestQuota is deprecated<br>navigator.webkitPersistentStorage.requestQuota(5<em>1024</em>1024,function(bytes){<br>window.requestFileSystem(window.PERSISTENT,bytes,function(file_system){<br>console.log(file_system);<br>},function(){});<br>},function(e){<br>console.log(‘Error’,e);<br>});<br>目前只有 chrome 支持，需启动本地服务。安装 chrome 扩展程序 HTML5 FileSystem Explorer 进行查看验证。</p>
<h3 id="拖放-API"><a href="#拖放-API" class="headerlink" title="拖放 API"></a>拖放 API</h3><p>实现拖放的步骤<br>在 HTML5 中要实现拖放操作，至少要经过以下两个步骤： 1)将想要拖放的对象元素的 draggable 属性设为 true(draggable=”true”)。这样才能将元素进行拖放。另外 img 元素与 a 元素（必须指定 href）默认拖放。 2)编写与拖放有关的事件处理代码。拖放的几个事件：<br>dragstart：被拖放的元素<br>drag：被拖放的元素<br>dragenter：拖放过程中鼠标经过的元素<br>dragover：拖放过程中鼠标经过的元素<br>dragleave：拖放过程中鼠标经过的元素<br>drop：拖放的目标元素<br>dragend：拖放的目标元素</p>
<pre><code>&lt;h2&gt;drag示例&lt;/h2&gt;
&lt;div id=&quot;dragme&quot; draggable=&quot;true&quot; style=&quot;width:200px;height:200px;border: 1px solid;&quot;&gt;请拖放&lt;/div&gt;
&lt;div id=&quot;text&quot; style=&quot;width:200px;height:200px;border: 1px solid;&quot;&gt;&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    function init()&#123;
        //自定义图标
        var dragIcon = document.createElement(&#39;img&#39;);
        dragIcon.src = &#39;http://www.iconpng.com/png/miui-fruitsugar/twelvekeydialer.png&#39;;
        var source = document.getElementById(&#39;dragme&#39;);
        var dest = document.getElementById(&#39;text&#39;);
        //(1)拖放开始
        source.addEventListener(&#39;dragstart&#39;,function(e)&#123;
            //向dataTransfer对象追加数据
            var dt = e.dataTransfer;
            dt.effectAllowed = &#39;all&#39;;
            dt.setDragImage(dragIcon,-10,-10);
            dt.setData(&#39;text/plain&#39;,&#39;你好&#39;); //setData一般采用两种两种数据格式，用于文本数据存储的&quot;text/plain&quot;和用于URL信息存储的&quot;text/uri-list&quot;
        &#125;,false);
        //(2)拖放事件
        dest.addEventListener(&#39;drop&#39;,function(e)&#123;
            var dt = e.dataTransfer;
            var text = dt.getData(&#39;text/plain&#39;);
            dest.textContent += text;
        &#125;,false);
        //(3)不执行默认处理（拒绝被拖放）
        dest.addEventListener(&#39;dragover&#39;,function(e)&#123;
            e.preventDefault(); //必须，阻止默认行为
        &#125;,false);
    &#125;
    init();
&lt;/script&gt;
</code></pre>
<h2 id="处理浏览器兼容性与-Modernizr-库"><a href="#处理浏览器兼容性与-Modernizr-库" class="headerlink" title="处理浏览器兼容性与 Modernizr 库"></a>处理浏览器兼容性与 Modernizr 库</h2><h3 id="处理浏览器兼容性"><a href="#处理浏览器兼容性" class="headerlink" title="处理浏览器兼容性"></a>处理浏览器兼容性</h3><p>一般较为常见的安全检测手段有 4 种： 1)检测全局对象，如 window、navigator 是否拥有指定的属性，如离线存储、地址位置信息等 2)通过创建新元素，检查元素对象上是否拥有指定的属性，如 Canvas 等。 3)通过创建新元素，检查元素对象上是否拥有指定的方法，同时调用该方法，并判断返回值，如检查 video 元素支持的视频格式 4)通过创建新元素，设置元素对象上的指定属性值，并判断设定后的值是否被保留。</p>
<h3 id="Modernizr-库概述"><a href="#Modernizr-库概述" class="headerlink" title="Modernizr 库概述"></a>Modernizr 库概述</h3><p>随着 HTML5 和 CSS3 加入越来越多的模块，检查各种浏览器是否支持这些模块，成了一大难题。Modernizr 就是用来解决这个问题的一个 JavaScript 库。<br>首先，从 modernizr.com 下载这个库。下载的时候，可以选择所需要的模块。然后，将它插入 HTML 页面的头部，放在 head 标签之中。</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html class=&quot;no-js&quot; lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;script src=&quot;js/modernizr.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;/html&gt;
</code></pre>
<h3 id="Modernizr-库-CSS-的新增-class"><a href="#Modernizr-库-CSS-的新增-class" class="headerlink" title="Modernizr 库 CSS 的新增 class"></a>Modernizr 库 CSS 的新增 class</h3><p>使用 Modernizr 以后，首先会把 html 元素的 class 替换掉。以 chrome 浏览器为例，新增的 class 大概是下面的样子。</p>
<pre><code>&lt;html class=&quot;js no-touch postmessage history multiplebgs boxshadow opacity cssanimations csscolumns cssgradients csstransforms csstransitions fontface localstorage sessionstorage svg inlinesvg blobbuilder blob bloburls download formdata&quot;&gt;
</code></pre>
<p>IE 7 则是这样：</p>
<pre><code>&lt;html class=&quot;js no-touch postmessage no-history no-multiplebgs no-boxshadow no-opacity no-cssanimations no-csscolumns no-cssgradients no-csstransforms no-csstransitions fontface localstorage sessionstorage no-svg no-inlinesvg wf-loading no-blobbuilder no-blob no-bloburls no-download no-formdata&quot;&gt;
</code></pre>
<p>然后，就可以针对不同的 CSS class，指定不同的样式。</p>
<pre><code>.button &#123;
   background: #000;
   opacity: 0.75;
&#125;

.no-opacity .button &#123;
   background: #444;
&#125;
</code></pre>
<h3 id="Modernizr-库-JavaScript-侦测"><a href="#Modernizr-库-JavaScript-侦测" class="headerlink" title="Modernizr 库 JavaScript 侦测"></a>Modernizr 库 JavaScript 侦测</h3><p>除了提供新增的 CSS class，Modernizr 还提供 JavaScript 方法，用来侦测浏览器是否支持某个功能。</p>
<pre><code>Modernizr.cssgradients; //True in Chrome, False in IE7

Modernizr.fontface; //True in Chrome, True in IE7

Modernizr.geolocation; //True in Chrome, False in IE7

if (Modernizr.canvas)&#123;
    // 支持canvas
&#125; else &#123;
   // 不支持canvas
&#125;

if (Modernizr.touch)&#123;
    // 支持触摸屏
&#125; else &#123;
   // 不支持触摸屏
&#125;
</code></pre>
<h3 id="Modernizr-库加载器"><a href="#Modernizr-库加载器" class="headerlink" title="Modernizr 库加载器"></a>Modernizr 库加载器</h3><p>Modernizr 允许根据 Javascript 侦测的不同结果，加载不同的脚本文件。</p>
<pre><code>Modernizr.load(&#123;
  test :        Modernizr.localstorage,
  yep  :        &#39;localStorage.js&#39;,
  nope :        &#39;alt-storageSystem.js&#39;,
  complete :    function () &#123; enableStorgeSaveUI();&#125;
&#125;);
</code></pre>
<p>Modernizr.load 方法用来加载脚本。它的属性如下：<br>test：用来测试浏览器是否支持某个属性。<br>yep：如果浏览器支持该属性，加载的脚本。<br>nope：如果浏览器不支持该属性，加载的脚本。<br>complete：加载完成后，运行的 JavaScript 代码。<br>可以指定在支持某个功能的情况，所要加载的 JavaScript 脚本和 CSS 样式。</p>
<pre><code>Modernizr.load(&#123;
  test : Modernizr.touch,
  yep :  [&#39;js/touch.js&#39;, &#39;css/touchStyles.css&#39;]
&#125;);
</code></pre>
<p>本章 Modernizr 部分来自阮一峰的 JavaScript 标准参考教程的<a target="_blank" rel="noopener" href="http://javascript.ruanyifeng.com/library/modernizr.html">Modernizr</a></p>
<h2 id="绘制图形"><a href="#绘制图形" class="headerlink" title="绘制图形"></a>绘制图形</h2><h3 id="canvas-元素的基础知识"><a href="#canvas-元素的基础知识" class="headerlink" title="canvas 元素的基础知识"></a>canvas 元素的基础知识</h3><p>canvas：画布<br>检测 Canvas 强化版：</p>
<pre><code>function isSupportCanvas()&#123;
    var cvs = document.createElement(&#39;canvas&#39;);
    // 首先判断getContext方法是否存在
    if(!cvs.getContext)&#123;
        return false;
    &#125;
    // 判断是否含有fillText方法
    return typeof cvs.getContext(&#39;2d&#39;).fillText == &#39;function&#39;;
&#125;
</code></pre>
<p>绘制矩形<br>用 canvas 绘制图形时，需要经过几道步骤： 1)取得 canvas 元素 2)取得上下文(context)：getContent 方法 3)设定绘图样式(style)：fillStyle、strokeStyle 4)指定线宽：lineWidth<br>5)context.fillRect(x,y,width,height)<br>context.strokeRect(x,y,width,height)<br>context.clearRect(x,y,width,height)<br>填充(fill)和绘制边框(stroke)</p>
<h3 id="使用路径"><a href="#使用路径" class="headerlink" title="使用路径"></a>使用路径</h3><p>绘制圆形<br>开始创建路径：beginPath 方法<br>创建图形的路径：context.arc(x,y,radius,startAngle,endAngle,anticlockwise)<br>路径创建完成后关闭路径: closePath 方法<br>设定绘制样式，调用绘制方法，绘制路径。</p>
<p>如果路径没有关闭：已经创建的路径会永远保留着，即使绘制完毕后，因此会进行重叠绘制，因此要对路径进行管理</p>
<p>moveTo(x,y)和 lineTo(x,y)</p>
<p>使用 bezierCurveTo 绘制曲线：context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);<br>二次样条曲线：context.quadraticCurveTo(in float cpx,in float cpy,in float x,in float y);</p>
<h3 id="绘制渐变图形"><a href="#绘制渐变图形" class="headerlink" title="绘制渐变图形"></a>绘制渐变图形</h3><p>绘制线性渐变：context.createLinearGradient(xStart,ySTart,xEnd,yEnd)<br>设定渐变颜色：context.addColorStop(offset,color)，渐变起点 offset 为 0,渐变结束点为 1。然后将 style 设定为 LinearGradient 对象。<br>绘制径向渐变：context.createRadialGradient(xStart,yStart,radiusStart,xEnd,yEnd,radiusEnd);</p>
<h3 id="绘制变形图形"><a href="#绘制变形图形" class="headerlink" title="绘制变形图形"></a>绘制变形图形</h3><p>坐标变换</p>
<ol>
<li>平移：context.translate(x,y);</li>
<li>缩放：context.scale(x,y);</li>
<li>旋转：context.rotate(angle);<br>坐标变换与路径的结合使用：另外写一个创建路径的函数，然后在坐标变换的同时调用该函数</li>
</ol>
<p>矩阵变换<br>context.transform(a,b,c,d,e,f);<br>这个方法与 css3 matrix 方法差不多 1)矩阵与 translate(x,y)：(1,0,0,1,x,y) 2)矩阵与 scale(x,y)：(x,0,0,y,0,0) 3)矩阵与 rotate(angle)：(Math.cos(angle _ Math.PI / 180),Math.sin(angle _ Math.PI / 180),-Math.cos(angle _ Math.PI / 180),Math.sin(angle _ Math.PI / 180),0,0) 4)矩阵与 skew(anglex,angley)：(1,Math.tan(angley _ Math.PI / 180),Math.tan(anglex _ Math.PI / 180),1,0,0)（css3 非 context 方法）</p>
<p>矩阵是一种高级应用，可以做一些没有提供的效果，比如镜像对称效果：((1-k<em>k) / (1+k</em>k), 2k / (1 + k<em>k), 2k / (1 + k</em>k), (k<em>k - 1) / (1+k</em>k), 0, 0)</p>
<p>可以用 setTransform(a,b,c,d,e,f)方法来重置变换矩阵</p>
<h3 id="图形组合"><a href="#图形组合" class="headerlink" title="图形组合"></a>图形组合</h3><p>context.globalCompositeOperation = type;<br>type 值：”source-over”,”destination-over”,”source-in”,”destination-in”,”souce-out”,”destination-out”,”source-atop”,”destination-atop”,”lighter”,”copy”,”xor”</p>
<h3 id="给图形绘制阴影"><a href="#给图形绘制阴影" class="headerlink" title="给图形绘制阴影"></a>给图形绘制阴影</h3><p>shadowOffsetX(),shadowOffsetY(),shadowColor(),shadowBlur()。如果想要后面的图形不再有阴影，只要把 shadowColor 设定为 rgba(0,0,0,0)就可以了。</p>
<h3 id="使用图像"><a href="#使用图像" class="headerlink" title="使用图像"></a>使用图像</h3><p>绘制图像</p>
<pre><code>context.drawImage(image,x,y)
context.drawImage(image,x,y,w,h)
context.drawImage(image,sx,sy,sw,sh,dx,dy,dw,dh)
var image = new Image();
image.src = &quot;img/17.jpg&quot;;
image.onload = function()&#123;&#125;;
</code></pre>
<p>图像平铺<br>一是使用 drawImage 方法循环处理，二是使用 context.createPattern(image,type);<br>type: no-repeat,repeat-x,repeat-y,repeat<br>使用 createPattern 方法创建填充样式，然后将该样式指定给图形上下文对象的 fillStyle 属性，最后再填充画布。</p>
<p>图像裁剪<br>使用图形上下文不带参数的 clip 方法来实现 canvas 元素的图像裁剪功能。该方法使用路径来对 canvas 画布设置一个裁剪区域。因此先创建路径，设置裁剪区域，再绘制图像。<br>如何取消裁剪区域：使用绘制状态的保存和恢复功能。save 方法和 restore 方法。</p>
<p>像素处理<br>反显：</p>
<pre><code>var imagedata;
var i;
var n = imagedata.data.length;
context.drawImage(image,0,0);
imagedata = context.getImageData(0,0,image.width,image.height);
for( i = 0; i &lt; n; i += 4)&#123;
    imagedata.data[i] = 255 - imagedata.data[i];
    imagedata.data[i+1] = 255 - imagedata.data[i+1];
    imagedata.data[i+2] = 255 - imagedata.data[i+2];
&#125;
context.putImageData(imagedata,0,0);
</code></pre>
<h3 id="绘制文字"><a href="#绘制文字" class="headerlink" title="绘制文字"></a>绘制文字</h3><p>fillText(text,x,y,[maxWidth]);<br>strokeText(text,x,y,[maxWidth]);<br>font 属性、fontAlign 属性、fontBaseline 属性<br>context.measureText(text);</p>
<h3 id="补充知识"><a href="#补充知识" class="headerlink" title="补充知识"></a>补充知识</h3><p>保存与恢复状态<br>图形上下文对象的当前状态的保存与恢复可以应用在以下场合： 1)图像或图形变形 2)图像裁剪 3)改变图形上下文以下属性时：<br>fillStyle<br>font<br>globalAlpha<br>globalCompositionOperation<br>lineCap<br>lineJoin<br>lineWidth<br>miterLimit<br>shadowBlur<br>shadowColor<br>shadowOffsetX<br>shadowOffsetY<br>strokeStyle<br>textAlign<br>textBaseline<br>clipping 区域<br>转换矩阵等<br>最后保存的最先还原</p>
<p>保存文件<br>canvas API 保存文件的原理实际上是把当前的绘画状态输出到一个 data URL 地址所指向的数据中的过程。<br>canvas.toDataURL(type);<br>type 表示输出数据的 MIME 类型</p>
<p>简单动画的制作 1)预先编写好用来绘图的函数，在改函数中先用 clearRect 方法将画布整体或局部擦除 2)使用 setInterval 方法设置动画的间隔时间</p>
<p>canvas 动画学习参考： 1.<a target="_blank" rel="noopener" href="https://www.pureweber.com/article/html5-cavas-animation/">HTML5-Canvas 动画原理</a> 2.<a target="_blank" rel="noopener" href="http://taobaofed.org/blog/2016/02/22/canvas-performance/">Canvas 最佳实践（性能篇）</a></p>
<h3 id="其他相关"><a href="#其他相关" class="headerlink" title="其他相关"></a>其他相关</h3><p>SVG<br>SVG 是 Scalable Vecotor Graphics 的缩写，即可缩放矢量图形，是基于 XML(可扩展标记语言)用来描述二维矢量图形的一种图形格式。<br>SVG 有如下优点： 1.基于 XML，继承了 XML 的扩平台和可扩展的特性 2.采用文本描述图形对象，利用搜索引擎通过文本内容搜索图片信息 3.良好的交互和动态特性，可以在其中嵌入动画，通过脚本收缩、旋转调整图形 4.对 DOM 支持完整，可以通过脚本获取元素，监听元素事件 5.体积小下载快，在互联网上传输有明显优势<br>WebGL</p>
<h2 id="媒体播放"><a href="#媒体播放" class="headerlink" title="媒体播放"></a>媒体播放</h2><pre><code>&lt;video id=&quot;player&quot; width=&quot;600&quot; height=&quot;450&quot; controls preload&gt;您的浏览器不支持HTML5
    &lt;source src=&quot;./videos/echo-hereweare.mp4&quot;&gt;&lt;/source&gt;  &lt;!-- 提供默认的播放视频  --&gt;
&lt;/video&gt;
</code></pre>
<p>1)video 播放相关 API</p>
<p>只读属性：<br>video.duration：整个媒体文件的播放时长，单位 s<br>video.paused ：如果媒体文件被暂停，则返回 true；如果还没开始播放，默认返回 true<br>video.ended ：如果媒体文件播放完毕，则返回 true</p>
<p>可写属性：<br>video.currentTime：以 s 为单位返回从开始播放到现在所用的时间。在播放过程中，设置 currentTime 来进行搜索，并定位到媒体文件的特定位置<br>video.volume ：在 0.0 到 1.0 之间设置音频音量的相对值，或者查询当前音量相对值<br>video.muted ：检测当前是否为静音，是则为 true；为文件设置静音或消除静音</p>
<p>控制函数：<br>video.play() ：播放视频文件<br>video.pause() ：暂停处于播放状态的视频文件<br>video.canPlayType() ：测试 video 元素是否支持给定 MIME 类型的文件</p>
<p>监听事件：<br>ontimeupdate ：当 video.currentTime 发生改变时触发该事件</p>
<p>2)全屏控制 API<br>说明：这里只给出 webkit 的全屏 API，本代码没有做兼容性处理，主要应用了 webkit 的一些高级 API 和 chrome 的伪元素，所以前面请大家用 chrome 打开演示地址。</p>
<p>video.webkitRequestFullScreen()：全屏显示<br>document.webkitCancelFullScreen()：退出全屏<br>document.webkitIsFullScreen：如果当前处于全屏状态，则返回 true,否则返回 false<br>document.addEventListener(‘webkitfullscreenchange’, handler)：当在全屏和非全屏状态切换时，触发该事件</p>
<p>3)本地文件读取 API<br>说明：我的这个视频播放器支持从本地添加视频文件播放，支持的格式在 webkit 浏览器支持的 html5 视频播放标准范围内。本地文件读取 API 是 html5 的新标准。</p>
<p>window.URL.createObjectURL(file)：file 为文件对象，该函数返回指向文件的对象 URL，通过该 URL 可以访问文件。</p>
<p>video.src = window.URL.createObjectURL(file);</p>
<p>音视频的实时通信：WebRTC 技术，该技术主要用于支持浏览器进行实时的语音对话和视频通信。</p>
<p>视频播放学习参考： 1.<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000000380064">打造自己的 html5 视频播放器</a> 2.<a target="_blank" rel="noopener" href="http://taobaofed.org/blog/2016/05/23/video-player/">视频播放的那些事</a></p>
<h2 id="本地存储"><a href="#本地存储" class="headerlink" title="本地存储"></a>本地存储</h2><h3 id="Web-Storage"><a href="#Web-Storage" class="headerlink" title="Web Storage"></a>Web Storage</h3><p>cookie 会带来什么问题：<br>1)cookie 大小限制在 4k 左右，不适合存业务数据<br>2)cookie 每次随 HTTP 事务一起发送，浪费带宽<br>localstorage 可以说是对 cookie 的优化，使用它可以方便在客户端存储数据，并且不会随着 HTTP 传输，但也不是没有问题：</p>
<p>1)localstorage 大小限制在 5m 左右，各个浏览器不一致<br>2)localstorage 在隐私模式下不可读取<br>3)localstorage 本质是在读写文件，数据多的话会比较卡（firefox 会一次性将数据导入内存，想想就觉得吓人啊）<br>4)localstorage 不能被爬虫爬取，不要用它完全取代 URL 传参</p>
<p>sessionStorage：<br>保存数据：sessionStorage.setItem(key,value);<br>读取数据：sessionStorege.getItem(key);<br>localStorage:<br>保存数据：localStorage.setItem(key,value);<br>读取数据：localStorege.getItem(key);<br>localStorage.length<br>localStorage.key(index)<br>localStorage.clear()</p>
<h3 id="本地数据库"><a href="#本地数据库" class="headerlink" title="本地数据库"></a>本地数据库</h3><h3 id="SQLLite"><a href="#SQLLite" class="headerlink" title="SQLLite"></a>SQLLite</h3><p>要使用 SQLLite 数据库，有两个必要的步骤： 1)创建访问数据库的对象 2)使用事务处理<br>var db = openDatabase(‘mydb’,’1.0’,’Test DB’,2 * 1024 *1024);<br>db.transaction(function(tx){<br>tx.executeSql(‘CREATE TABLE IF EXISTS LOGS (id unique Log)’);<br>});<br>transaction 方法中的处理 1)追加数据<br>tx.executeSql(‘INSERT INFO MsgData VALUES(?,?,?)’,[name,message,time],function(tx,rs){},function(tx,error)); 2)创建数据表<br>tx.executeSql(‘CREATE TABLE IF NOT EXISTS MsgData(name TEXT,message TEXT,tiem INTEGER)’,[]); 3)获取全部数据<br>tx.ececuteSql(‘SELECT * FROM MsgData’,[],…);</p>
<h3 id="indexedDB"><a href="#indexedDB" class="headerlink" title="indexedDB"></a>indexedDB</h3><p>indexedDb 是 HTML5 推出的一种轻量级的 NoSQL 数据库，即常说的非关系型数据库。比起传统的关系型数据库，NoSQL 数据库具有易扩展、读写快速、成本低廉等特点。HTML5 的 IndexedDB 还包含了常见的数据库构造，如事务、索引、游标等，在 API 的使用上分为同步和异步两种形态。<br>// 创建一个数据库<br>var request = indexedDB.open(‘Html5IndexedDB’,2);<br>request.onerror = function(e){<br>console.log(e);<br>};<br>//监听事务事件<br>request.onupgradeneeded = function(e){<br>// 获取数据库对象<br>var db = e.target.result;<br>// 创建对象存储空间存放用户信息<br>objectStore = db.createObjectStore(‘users’,{keyPath:”html5”});<br>// 创建索引来通过 name 搜索客户<br>objectStore.createIndex(‘name’,’name’,{unique:false});<br>objectStore.createIndex(‘id’,’id’,{unique:true});<br>objectStore.add({html5:’1’,name:’小王’,sex:’女’,id:’3323’,age:23});<br>}</p>
<h2 id="离线应用程序"><a href="#离线应用程序" class="headerlink" title="离线应用程序"></a>离线应用程序</h2><p>离线 Web 应用程序是指：当客户端本地与 Web 应用程序的服务器没有建立连接时，也能正常在客户端使用该 Web 应用程序进行有关操作。</p>
<h3 id="本地缓存和浏览器缓存的区别："><a href="#本地缓存和浏览器缓存的区别：" class="headerlink" title="本地缓存和浏览器缓存的区别："></a>本地缓存和浏览器缓存的区别：</h3><p>1)本地缓存为整个 web 应用程序服务的，而浏览器的网页缓存只服务于单个网页。任何网页都具有网页缓存。而本地缓存至缓存那些指定的缓存的页面。</p>
<p>2)网页缓存不安全不可靠，因为我们不知道在网站中到底缓存了哪些网页，以及缓存了网页上的哪些资源。而本地缓存可靠，我们可以控制对哪些内容进行缓存，不对哪些内容进行缓存，开发人员还可以利用编程的手段来控制缓存的更新，利用缓存对象的各种属性、状态和事件来开发出更加强大的离线应用程序。</p>
<p>3)（有些）浏览器会主动保存自己的缓存文件以加快网站加载速度。但是要实现浏览器缓存必须要满足一个前提，那就是网络必须要保持连接。如果网络没有连接，即使浏览器启用了对一个站点的缓存，依然无法打开这个站点。只会收到一条错误信息。而使用离线 web 应用，我们可以主动告诉浏览器应该从网站服务器中获取或缓存哪些文件，并且在网络离线状态下依然能够访问这个网站。</p>
<h3 id="实现-HTML5-应用程序缓存"><a href="#实现-HTML5-应用程序缓存" class="headerlink" title="实现 HTML5 应用程序缓存"></a>实现 HTML5 应用程序缓存</h3><p>实现 HTML5 应用程序缓存非常简单，只需三步，并且不需要任何 API。只需要告诉浏览器需要离线缓存的文件，并对服务器和网页做一些简单的设置即可实现。 1)创建一个 cache.manifest 文件，并确保文件具有正确的内容。 2)在服务器上设置内容类型。 3)所有的 HTML 文件都指向 cache.manifest。</p>
<p>具体实现：<br>首先我们建立一个名为 cache.manifest 的文件，Windows 平台下用记事本即可（也可用其他的 IDE）。文件内容如下：</p>
<pre><code>CACHE MANIFEST
#version1
CACHE:
index.html
404.html
favicon.ico
robots.txt
humans.txt
apple-touch-icon.png
css/normalize.min.css
css/main.css
css/bootmetro-icons.min.css
img/pho-cat.jpg
img/pho-huangshan.jpg

FALLBACK:
online.js local.js

NETWORK:
*
</code></pre>
<p>注意事项： 1)第一行必须是”CACHE DMANIFEST”文字，以把本文件的作用告知浏览器，即对本地缓存中的资源文件进行具体设置。 2)在 manifest 文件中，可以加上注释来进行一些必要说明或解释。注释行以”#”文字开头。 3)在 CACHE 之后的部分为列出我们需要缓存的文件。 4)在 FALLBACK 之后的部分每一行中指定两个资源文件，第一个资源文件为能够在线访问时使用的资源文件，第二个资源文件为不能在线访问时使用的备用资源文件。 5)在 NETWORK 之后可以指定在线白名单，即列出我们不希望离线存储的文件，因为通常它们的内容需要互联网访问才有意义。另外，在此部分我们可以使用快捷方式：通配符*。这将告诉浏览器，应用服务器中获取没有在显示部分中提到的任何文件或 URL。</p>
<p>服务器上设置内容类型。<br>真正运行或测试离线 web 应用程序的时候，需要对服务器进行配置，让服务器支持 text/cache-manifest 这个 MIME 类型（在 h5 中规定 manifest 文件的 MIME 类型是 text/cache-manifest）。例如对 Apache 服务器进行配置的时候，需要找到｛apache_home｝/conf/mime.type 这个文件(.htaccess)，并在文件最后添加如下所示代码：</p>
<pre><code>text/cache-manifest .manifest
</code></pre>
<p>在微软的 IIS 服务器中的步骤如下所示：<br>(1).右键选择默认网站或需要添加类型的网站，弹出属性对话框<br>(2).选择”http 头”标签<br>(3).在 MIME 映射下，单击文件类型按钮<br>(4).在打开的 MIME 类型对话框中单击新建按钮<br>(5).在关联扩展名文本中输入”manifest”，在内容类型文本框中输入”text/cache-manifest”,然后点击确定按钮。</p>
<p>设置 HTML 文件的指向。<br>完成这一步后，就完成了 web 离线缓存的所有步骤。由于浏览的文件内容都没有更改且存储在本地，因此现在网页的打开速度会更快（即使是在线状态也如此）。</p>
<p>注意事项： 1)网站的每一个 html 页面都必须设置 html 元素的 manifest 属性。 2)在你的整个网站应用中，只能有一个 cache.manifest 文件（建议放在网站根目录下）； 3)部分浏览器（如 IE8-）不支持 HTML5 离线缓存；<br>4)“#” 开头的注释行可满足其他用途。应用的缓存会在其 manifest 文件更改时被更新。如果您编辑了一幅图片，或者修改了一个 JavaScript 函数，这些改变都不会被重新缓存。更新注释行中的日期和版本号是一种使浏览器重新缓存文件的办法。</p>
<h3 id="applicationCache-的两个方法"><a href="#applicationCache-的两个方法" class="headerlink" title="applicationCache 的两个方法"></a>applicationCache 的两个方法</h3><p>applicationCache 的 update 方法<br>显式调用了更新缓存算法以检测是否有最新版本的的应用程序。这导致浏览器检测同一个清单文件（并触发相同的事件），这和第一次载入应用程序时的效果是一样的。<br>applicationCache 的 swapCache 方法：<br>它告诉浏览器可以弃用老缓存，所有的请求都从新缓存中获取。注意，这并不会重新载入应用程序：所有已经载入的 html 文件、图片、脚本等资源都不会改变。但是，之后的请求将从最新的缓存中获取。这会导致“版本错乱”的问题，因此一般不推荐使用，除非应用程序设计得很好，确保这样的方式没有问题。只有 ApplicationCache.UPDATEREADY 和 ApplicationCache.ABSOLETE 时调用 swapCache()才有意义（当状态 OBSOLETE 时，调用它可以立即弃用废弃的缓存，让之后所有的请求都通过网络获取）。如果状态属性是其他数值的时候调用 swapCache()方法，它就会抛出异常。</p>
<pre><code>function init()&#123;
    setInterval(function()&#123;
        //手工检查是否更新
        applicationCache.update();
    &#125;,5000);
    applicationCache.addEventListener(&#39;updateready&#39;,function()&#123;
        if( confirm(&quot;本地缓存已被更新，需要刷新页面来获取应用程序最新版本，是否刷新？&quot;) )&#123;
            // 手工更新本地缓存
            applicationCache.swapCache();
            // 重置画面
            location.reload();
        &#125;
    &#125;,true);
&#125;
init();
</code></pre>
<h3 id="applicationCache-对象的事件"><a href="#applicationCache-对象的事件" class="headerlink" title="applicationCache 对象的事件"></a>applicationCache 对象的事件</h3><p>1.checking 事件<br>2.downloading 事件<br>3.progress 事件<br>4.cached 事件<br>5.noupdate 事件<br>6.updateready 事件<br>7.obsolete 事件<br>8.error 事件</p>
<p>(1).没有可用更新<br>如果应用程序已经缓存并且清单文件没有动，则浏览器会触发 noupdate 事件<br>(2).有可用更新<br>如果应用程序已经缓存并且清单元件有改动，则浏览器会触发 downloading 事件并开始下载和缓存清单文件中列举的所有资源。随着下载过程的进行浏览器还会触发”progress”事件，在下载完成后，会触发”updateready”事件。<br>(3).首次载入新的应用程序<br>如果还未缓存应用程序，如上所述 downloading，progress 事件都会触发。但是，当下载完成后，浏览器会触发”cached”事件而不是 updateready 事件<br>(4).浏览器处于离线状态<br>如果浏览器处于离线状态，它无法检查清单文件，同时它会触发“error”事件。如果一个未缓存的应用程序引用了不存的清单文件，浏览器也会触发该事件<br>(5).清单文件不存在<br>如果浏览器处理在线状态，应用程序也已经缓存起来，但是清单文件不存在，浏览器会触发 obsolete 事件，并将该应用程序从缓存中移除。</p>
<h3 id="如何判断在线还是离线状态？"><a href="#如何判断在线还是离线状态？" class="headerlink" title="如何判断在线还是离线状态？"></a>如何判断在线还是离线状态？</h3><p>navigator.onLine 是 HTML5 定义用来检测设备是在线还是离线。对应的值为 false 或 true。<br>HTML5 定义了 online 和 offline 事件用于监听网络状态变化。</p>
<pre><code>window.addEventListener(&#39;online&#39;, callback); // 离线到上线
window.addEventListener(&#39;offline&#39;, callback); // 上线到离线
</code></pre>
<h2 id="通信-API"><a href="#通信-API" class="headerlink" title="通信 API"></a>通信 API</h2><h3 id="跨文档消息传输"><a href="#跨文档消息传输" class="headerlink" title="跨文档消息传输"></a>跨文档消息传输</h3><p>跨文档消息传递（Cross Document Messaging），有时候简称 XDM。指的是来自不同域的页面间传递消息。比如：abc.com 与内联框架中的 efg.com 进行通信。</p>
<p>XDM 的核心是 postMessage()方法，这是 HTML5 规范的 api，意思就是向另一个地方发送消息，除了 XDM 中有 postMessage()方法，在 HTML5 规范中，其他地方也有相同的方法名，比如 web worker 中、WebSockets 以及 Server-SentEvents 中。但目的都是向另一个地方发送数据，只不过在 XDM 中，另一个地方指的是页面中的 iframe 框架，或者由当前页面弹出的窗口。</p>
<p>postMessage()方法</p>
<p>postMessage()方法接收两个参数：postMessage(message, targetOrigin):</p>
<p>message：传递的消息，可以是任意的数据类型，不过为了保证兼容性，最好只传递字符串（部分浏览器智能处理字符串），对于对象的数据，可以先用 JSON.stingify()方法转成字符串，然后再通过 JSON.parse()方法转成对象。在低版本的浏览器中，可以使用 json2.js 实现相同的效果。<br>targetOrigin：消息接收方的域（URL 地址）。postMessage 会将 message 发送到该窗口，如果不指定目标源，可以设置成*，表示消息发送到任意窗口。第二个参数对保障安全通信非常重要，可以防止浏览器把消息传递到不安全的地方。</p>
<p>postMessage()方法实践</p>
<p>本地建立一个 html 文件：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;postMessage&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;input type=&quot;text&quot; id=&quot;message&quot;&gt;&lt;button&gt;发送消息&lt;/button&gt;
&lt;iframe src=&quot;http://localhost:63342/post%20text/iframe.html&quot; id=&quot;iframe1&quot;&gt;&lt;/iframe&gt;
&lt;script&gt;
    window.onload = function()&#123;
        var message = document.getElementById(&quot;message&quot;),
                btn = document.getElementsByTagName(&quot;button&quot;)[0],
                iframe = document.getElementById(&quot;iframe1&quot;);

        var iWin = iframe.contentWindow;

        btn.onclick = function()&#123;
            iWin.postMessage(message.value,&quot;http://localhost:63342/post%20text/test.html&quot;);
        &#125;
    &#125;
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>iframe 页面</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang=&quot;en&quot;&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        window.onmessage = function(e)&#123;
            console.log(e);
            document.body.innerHTML = &quot;&quot;;
            document.body.innerHTML = e.data;
        &#125;
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>这样，当我在文本框中输入内容并且点击发送的时候，框架就可以获取到我发送的信息，从而可以进行相应的操作。</p>
<p>onmessage 事件<br>当接收到 XDM 消息时，触发 window 对象的 onmessage 事件，这个事件是以异步形式触发的。onmessage 事件有三个重要的参数：data，origin，source。</p>
<p>data：postMessage 传递进来的值<br>origin：发送消息的文档所在的域<br>source：发送消息文档的 window 对象的代理，如果是来自同一个域，则该对象就是 window，可以使用其所有方法，如果是不同的域，则该 window 是不能使用的，除了调用 postMessage()方法之外。<br>接收到消息后，验证消息的来源是很重要的，就像给 postMessage()方法指定第二个参数，以确保浏览器不会把消息发送给其他框架一样。判断其 origin 即可判断来源：</p>
<pre><code>//iframe页面
window.onmessage = function(e)&#123;
    if(e.origin === &#39;http://sandbox.runjs.cn&#39;)&#123;
        //处理数据
        //接收相应
        e.source.postMessage(&quot;已经收到信息！&quot;, &quot;http://localhost:63342/post%20text/test.html&quot;&quot;);
    &#125;
&#125;
</code></pre>
<p>浏览器兼容性<br>就像 localStorage 一样，IE8 也支持。</p>
<p>总结</p>
<p>postMessage 方法进行跨文档信息传递简单方便<br>在不同域时，event.source 中的 window 对象为代理 window 对象，只能调用 postMessage()方法<br>onmessage 事件是 window 对象上得事件，在使用时注意 IE 的事件处理程序，attachEvent</p>
<p>原文：<a target="_blank" rel="noopener" href="http://youthol.top/2016/01/19/js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9A%E6%93%8D%E4%BD%9Ciframe-postmessage%E8%B7%A8%E6%96%87%E6%A1%A3%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92/">操作 iframe–postMessage 跨文档消息传递</a></p>
<h3 id="XMLHttpRequest-Level-2"><a href="#XMLHttpRequest-Level-2" class="headerlink" title="XMLHttpRequest Level 2"></a>XMLHttpRequest Level 2</h3><p>XMLHttpRequest Level 2 是早期 XMLHttpRquest 的升级版，最初的 XMLHttpRquest 被设计为仅限于同源通信，不能跨域进行数据传输，导致后续演变出 JSONP 方法。XMLHttpRquest Level 2 对同源策略进行了修改，允许跨域的数据请求，同时还添加了 progress 事件用于监听请求进度，返回进度信息。XMLHttpRquest Level 2 要求所有跨域的请求都要使用 HTTP 协议中的 origin 信息头，同时数据接收服务器需要具备 CORS 策略，各种服务器的 CORS 策略设置可以参考网站<a target="_blank" rel="noopener" href="http://enable-cors.org/">http://enable-cors.org/</a><br>兼容性：IE10+<br>客户端：</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>数据：</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>获取<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">'click'</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'浏览器不支持 html5 XMLHttpRequst Level 2 的跨域请求支持'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
          document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://localhost:8080'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>服务端(nodejs)：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
http
  <span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span> <span class="token string">'http://localhost:63342'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span> <span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    req<span class="token punctuation">.</span><span class="token function">setEncoding</span><span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> data<span class="token operator">:</span> <span class="token string">'Hello World!'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'listing on http://localhost:8080'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>XMLHttpRequest Level 2 对远端请求的服务器有一定的要求，需要在服务器端返回的 HTTP 信息头中指明支持的域名。如果想对所有请求都通过处理，可以设置为”*“号。如果要指定多个，一般会认为使用以下写法：</p>
<pre><code>res.setHeader(&#39;Access-Control-Allow-Origin&#39;,&#39;http://localhost,http://test.com&#39;); //域名之间使用逗号
res.setHeader(&#39;Access-Control-Allow-Origin&#39;,&#39;http://localhost http://test.com&#39;); //域名之间使用空格
</code></pre>
<p>非常不幸的是，浏览器无法识别这两种返回头，推荐先对请求域名做判断，如果符合业务要求，再设置对于域名的 Access-Control-Allow-Origin 头信息。</p>
<h3 id="Web-Socket-通信"><a href="#Web-Socket-通信" class="headerlink" title="Web Socket 通信"></a>Web Socket 通信</h3><p>在讲 Websocket 之前，先讲讲 long poll 和 ajax 轮询的原理。<br>首先是 ajax 轮询，ajax 轮询的原理非常简单，让浏览器隔个几秒就发送一次请求，询问服务器是否有新信息。<br>long poll 其实原理跟 ajax 轮询差不多，都是采用轮询的方式，不过采取的是阻塞模型（一直打电话，没收到就不挂电话），也就是说，客户端发起连接后，如果没消息，就一直不返回 Response 给客户端。直到有消息才返回，返回完之后，客户端再次建立连接，周而复始。<br>从上面可以看出其实这两种方式，都是在不断地建立 HTTP 连接，然后等待服务端处理，可以体现 HTTP 协议的另外一个特点，被动性。<br>何为被动性呢，其实就是，服务端不能主动联系客户端，只能有客户端发起。<br>通过上面这个例子，我们可以看出，这两种方式都不是最好的方式，需要很多资源。<br>一种需要更快的速度，一种需要更多的’电话’。这两种都会导致’电话’的需求越来越高。<br>哦对了，忘记说了 HTTP 还是一个无状态协议。</p>
<p>所以在这种情况下出现了，Websocket 出现了。<br>他解决了 HTTP 的这几个难题。<br>首先，被动性，当服务器完成协议升级后（HTTP-&gt;Websocket），服务端就可以主动推送信息给客户端啦。<br>就变成了这样，只需要经过一次 HTTP 请求，就可以做到源源不断的信息传送了。（在程序设计中，这种设计叫做回调，即：你有信息了再来通知我，而不是我傻乎乎的每次跑来问你）<br>这样的协议解决了上面同步有延迟，而且还非常消耗资源的这种情况。<br>同时，在传统的方式上，要不断的建立，关闭 HTTP 协议，由于 HTTP 是非状态性的，每次都要重新传输 identity info（鉴别信息），来告诉服务端你是谁。<br>同时由客户主动询问，转换为服务器（推送）有信息的时候就发送（当然客户端还是等主动发送信息过来的。。），没有信息的时候就交给接线员（Nginx），不需要占用本身速度就慢的客服（Handler）了<br><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/20215561">知乎参考</a><br><a target="_blank" rel="noopener" href="http://javascript.ruanyifeng.com/htmlapi/websocket.html">进一步学习</a></p>
<h3 id="Socket-IO-通信框架"><a href="#Socket-IO-通信框架" class="headerlink" title="Socket.IO 通信框架"></a>Socket.IO 通信框架</h3><p>Socket.IO 是 Guillermo Rauch 开发的基于 Node.js 的应用项目，以实现跨浏览器和跨平台应用为目标。Socket.IO 针对不同的浏览器会做自动优雅降级，选择当前浏览器最合适的实现方式，如在一些不支持 HTML5 WebSocket 的浏览器上，会使用长连接的 Ajax 技术。同时 Socket.IO 提供了一套平台统一的应用程序接口，开发者在使用时完全不用考虑浏览器的兼容问题。</p>
<h2 id="Web-Workers"><a href="#Web-Workers" class="headerlink" title="Web Workers"></a>Web Workers</h2><p>JavaScript 语言采用的是单线程模型，也就是说，所有任务排成一个队列，一次只能做一件事。随着电脑计算能力的增强，尤其是多核 CPU 的出现，这一点带来很大的不便，无法充分发挥 JavaScript 的潜力。</p>
<p>Web Worker 的目的，就是为 JavaScript 创造多线程环境，允许主线程将一些任务分配给子线程。在主线程运行的同时，子线程在后台运行，两者互不干扰。等到子线程完成计算任务，再把结果返回给主线程。因此，每一个子线程就好像一个“工人”（worker），默默地完成自己的工作。这样做的好处是，一些高计算量或高延迟的工作，被 worker 线程负担了，所以主进程（通常是 UI 进程）就会很流畅，不会被阻塞或拖慢。<br>在现实开发中 Web Worker 常常被用于处理大型密集型数据任务，可以有效的避免阻塞主 UI 线程渲染交互。</p>
<p>Worker 线程分成好几种。 1)普通的 Worker：只能与创造它们的主进程通信。<br>2)Shared Worker：能被所有同源的进程获取（比如来自不同的浏览器窗口、iframe 窗口和其他 Shared worker），它们必须通过一个端口通信。<br>3)ServiceWorker：实际上是一个在网络应用与浏览器或网络层之间的代理层。它可以拦截网络请求，使得离线访问成为可能。</p>
<p>Web Worker 有以下几个特点： 1)同域限制。子线程加载的脚本文件，必须与主线程的脚本文件在同一个域。<br>2)DOM 限制。子线程所在的全局对象，与主进程不一样，它无法读取网页的 DOM 对象，即 document、window、parent 这些对象，子线程都无法得到。（但是，navigator 对象和 location 对象可以获得。） 3)脚本限制。子线程无法读取网页的全局变量和函数，也不能执行 alert 和 confirm 方法，不过可以执行 setInterval 和 setTimeout，以及使用 XMLHttpRequest 对象发出 AJAX 请求。 4)文件限制。子线程无法读取本地文件，即子线程无法打开本机的文件系统（file://），它所加载的脚本，必须来自网络。</p>
<p>注意线程嵌套在 chrome 中有 bug</p>
<p>线程中可用的变量、函数与类：<br>self：self 关键词用来表示本线程范围内的作用域<br>postMessage(message)：向创建线程的源窗口发送信息<br>worker.postMessage()：向子线程中提交信息<br>onmessage：获取接收信息的事件句柄<br>importScripts(urls)：导入其他 JavaScript 脚本文件 importScript(‘script1.js’,’scripts\script2.js’,’scripts\script3.js’);<br>navigator 对象<br>sessionStorage、localStorage<br>XMLHttpRequest<br>Web Workers<br>setTimeout()/setInterval()<br>close：可用结束本线程<br>eval()、isNaN()、escape()等，可以使用所有 JavaScript 核心函数<br>object：可以创建和使用本地对象<br>WebSockets：可以使用 WebSockets API 来向服务器发送和接收信息</p>
<h2 id="获取地理位置"><a href="#获取地理位置" class="headerlink" title="获取地理位置"></a>获取地理位置</h2><h3 id="有哪些定位数据"><a href="#有哪些定位数据" class="headerlink" title="有哪些定位数据"></a>有哪些定位数据</h3><p>1.IP 地址<br>2.GPS(Global Positioning System)<br>3.RFID(Radio Frequency IDentification，即射频识别)<br>4.Wi-Fi 地址<br>5.GSM 或 CDMA 手机的 ID 6.用户自定义的地理位置数据</p>
<h3 id="Geolocation-API-的基本知识"><a href="#Geolocation-API-的基本知识" class="headerlink" title="Geolocation API 的基本知识"></a>Geolocation API 的基本知识</h3><p>获取当前的地理位置</p>
<pre><code>navigator.geolocation.getCurrentPosition(success,error,options);
</code></pre>
<p>第一个参数为获取当前地理位置成功时所执行的回调函数，第二个参数为获取失败时所执行的回调函数，第三个参数为一些可选属性的列表。<br>若成功，则 getCurrentPosition()方法返回对象。始终会返回 latitude、longitude 以及 accuracy 属性。如果可用，则会返回其他下面的属性。<br>coords.latitude 十进制数的纬度<br>coords.longitude 十进制数的经度<br>coords.accuracy 位置精度<br>coords.altitude 海拔，海平面以上以米计<br>coords.altitudeAccuracy 位置的海拔精度<br>coords.heading 方向，从正北开始以度计<br>coords.speed 速度，以米/每秒计<br>timestamp 响应的日期/时间<br>获取当前地理位置失败<br>该回调函数使用一个 error 对象作为参数，这个参数具有以下两个属性：<br>code 属性：<br>用户拒绝了位置服务（属性值为 1）<br>获取不到位置信息（属性值为 2）<br>获取信息超时错误（属性值为 3）<br>message 属性<br>message 属性为一个字符串，在该字符串中包含了错误信息</p>
<p>getCurrentPosition 方法中的第三个参数可以省略，它是一些可先属性的列表：<br>enableHighAccuracy：是否要求高精度的地理位置信息。在很多设备上设置了都没用，多数情况下把该属性设为默认。<br>timeout：超时设置<br>maximumAge：对地理位置信息进行缓存的有效时间。</p>
<p>持续监视当前地理位置信息</p>
<pre><code>watchCurrentPosition(onSuccess,onError,options);
</code></pre>
<p>停止获取用户的当前地理位置信息<br>clearWatch(watchId)<br>使用方法和 clearTimeout 差不多</p>
<h2 id="微数据"><a href="#微数据" class="headerlink" title="微数据"></a>微数据</h2><p>HTML5 微数据规范是一种标记内容以描述特定类型的信息，例如评论、人物信息或事件。每种信息都描述特定类型的项，例如人物、事件或评论。例如，事件可以包含 venue、starting time、name 和 category 属性。<br>微数据使用 HTML 标记（常为 span 或 div）中的简单属性为项和属性指定简要的描述性名称。<br><a target="_blank" rel="noopener" href="http://www.zhangxinxu.com/wordpress/2011/12/html5%E6%89%A9%E5%B1%95-%E5%BE%AE%E6%95%B0%E6%8D%AE-%E4%B8%B0%E5%AF%8C%E7%BD%91%E9%A1%B5%E6%91%98%E8%A6%81/">HTML5 扩展之微数据与丰富网页摘要</a></p>
<h2 id="History-API"><a href="#History-API" class="headerlink" title="History API"></a>History API</h2><p>HTML5 中给 History 新增了两个方法，允许开发者逐条地添加和修改历史记录，方法如下：<br>pushState：在历史堆栈的顶部添加一条记录，history.pushState({}, “页面标题”, “xxx.html”);<br>replaceState：更改当前页面的历史记录，参数同 pushState 方法<br>在 HTML5 History 出现之前，要记录页面状态和浏览器记录只能通过 Hash 和 iFrame 两种方式。可以借助第三方类库 History.js 进行兼容。</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Angus</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://github.com/SilenceZeng/posts/57973.html">https://github.com/SilenceZeng/posts/57973.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Angus</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/HTML5/">
                                    <span class="chip bg-color">HTML5</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/37668.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/21.jpg" class="responsive-img" alt="张鑫旭CSS深入系列学习总结">
                        
                        <span class="card-title">张鑫旭CSS深入系列学习总结</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2016-08-30
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%89%8D%E7%AB%AF/" class="post-category">
                                    前端
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%89%8D%E7%AB%AF/">
                        <span class="chip bg-color">前端</span>
                    </a>
                    
                    <a href="/tags/%E7%A7%AF%E7%B4%AF/">
                        <span class="chip bg-color">积累</span>
                    </a>
                    
                    <a href="/tags/CSS/">
                        <span class="chip bg-color">CSS</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/30021.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/3.jpg" class="responsive-img" alt="javaScript篇01--javascript事件">
                        
                        <span class="card-title">javaScript篇01--javascript事件</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2016-06-21
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%89%8D%E7%AB%AF/" class="post-category">
                                    前端
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%89%8D%E7%AB%AF/">
                        <span class="chip bg-color">前端</span>
                    </a>
                    
                    <a href="/tags/javascript/">
                        <span class="chip bg-color">javascript</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2015-2022</span>
            
            <span id="year">2015</span>
            <a href="/about" target="_blank">Angus</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/SilenceZeng" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:tsang1205@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
